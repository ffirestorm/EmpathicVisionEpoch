name: Notify Feishu on Push

on:
  push:
    branches:
      - main   # æ”¹æˆä½ çš„ä¸»åˆ†æ”¯

jobs:
  notify:
    runs-on: ubuntu-latest

    steps:
      - name: Send Feishu Notification
        run: |
          MESSAGE="ğŸ”” ä»“åº“æ›´æ–°ï¼š${{ github.repository }}\n\
          ğŸ‘¤ æäº¤è€…ï¼š${{ github.actor }}\n\
          ğŸ“„ åˆ†æ”¯ï¼š${{ github.ref_name }}\n\
          ğŸ“ æäº¤ä¿¡æ¯ï¼š${{ github.event.head_commit.message }}"

          curl -X POST \
            -H "Content-Type: application/json" \
            -d "{
              \"msg_type\": \"text\",
              \"content\": {
                \"text\": \"$MESSAGE\"
              }
            }" \
            ${{ secrets.FEISHU_WEBHOOK }}
